<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ahora Sirviendo</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #0b3d91;
      color: white;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    .counter-container {
      display: flex;
      gap: 100px;
    }

    .counter {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      user-select: none;
    }

    h2 {
      font-size: 2em;
      margin: 0;
      opacity: 0.8;
    }

    h1 {
      font-size: 3em;
      margin: 0.3em 0;
    }

    .number {
      font-size: 8em;
      font-weight: bold;
      transition: opacity 0.3s ease;
    }
  </style>
</head>
<body tabindex="0">
  <div class="counter-container">
    <div class="counter" id="menudeo">
      <h2>11 o menos</h2>
      <h1>Ahora sirviendo:</h1>
      <div class="number" id="number-menudeo">1</div>
    </div>

    <div class="counter" id="mayoreo">
      <h2>MÃ¡s</h2>
      <h1>Ahora sirviendo:</h1>
      <div class="number" id="number-mayoreo">1</div>
    </div>
  </div>

  <!-- Firebase Libraries -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAiU-noiSvb5OF6OsFKr7H3CKPmKXYR2ws",
      authDomain: "numero-turnos.firebaseapp.com",
      databaseURL: "https://numero-turnos-default-rtdb.firebaseio.com",
      projectId: "numero-turnos",
      storageBucket: "numero-turnos.appspot.com",
      messagingSenderId: "841522897826",
      appId: "1:841522897826:web:0826b4d927e72ba58888fb"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const paths = {
      menudeo: db.ref("nowServingMenudeo"),
      mayoreo: db.ref("nowServingMayoreo")
    };

    const displays = {
      menudeo: document.getElementById("number-menudeo"),
      mayoreo: document.getElementById("number-mayoreo")
    };

    function updateDisplay(display, value) {
      display.style.opacity = 0;
      setTimeout(() => {
        display.innerText = value;
        display.style.opacity = 1;
      }, 150);
    }

    function setupCounter(type) {
      paths[type].on("value", (snapshot) => {
        const val = snapshot.val() || 1;
        updateDisplay(displays[type], val);
      });
    }

    function changeCount(type, change) {
      paths[type].once("value").then(snapshot => {
        let val = snapshot.val() || 1;
        val = Math.max(1, val + change);
        paths[type].set(val);
      });
    }

    setupCounter("menudeo");
    setupCounter("mayoreo");

    // Click behavior
    document.getElementById("menudeo").addEventListener("click", () => changeCount("menudeo", 1));
    document.getElementById("mayoreo").addEventListener("click", () => changeCount("mayoreo", 1));

    // Keyboard control
    document.body.addEventListener("keydown", (e) => {
      if (e.key === "ArrowRight") changeCount("menudeo", 1);
      else if (e.key === "ArrowLeft") changeCount("menudeo", -1);
      else if (e.key === "ArrowUp") changeCount("mayoreo", 1);
      else if (e.key === "ArrowDown") changeCount("mayoreo", -1);
    });

    document.body.focus();
  </script>
</body>
</html>
